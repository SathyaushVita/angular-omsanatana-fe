<div class="container py-4 header-m">

   
    <ng-template [ngIf]="displayName === 'Training'">
        <ngx-spinner bdOpacity=0.9 bdColor="rgba(51, 51, 51, 0.8)" size="medium" color="#fff"
        type="ball-spin-clockwise">
      </ngx-spinner>
   
   
    <div class="form-card">
        <form [formGroup]="organizationForm" (ngSubmit)="onSubmit()" class="p-5">
            <div class="row mt-5">
                <h3 class="section-header-title text-center">Add a Training</h3>
            </div>

            <h3 class="organization-form-heading">Training Details</h3>
            <hr />

            <div class="row mb-2">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="name">Training Name *</label>
                        <input type="text" class="form-control" id="name" formControlName="name" placeholder="Enter the Training Name" [class.is-invalid]="organizationForm.get('name')?.touched && organizationForm.get('name')?.invalid">
                    </div>
                </div>


                <div class="col-md-4">
                    <div class="form-group">
                        <label for="trainer_name">Trainer Name *</label>
                        <input type="text" class="form-control" id="trainer_name" formControlName="trainer_name" placeholder="Enter the Trainer Name" [class.is-invalid]="organizationForm.get('trainer_name')?.touched && organizationForm.get('trainer_name')?.invalid">
                    </div>
                </div>

                <!-- <div class="col-md-4">
                    <div class="form-group">
                        <label for="contact_details">Contact Number *</label>
                        <input type="text" class="form-control" id="contact_details" formControlName="contact_details" placeholder="Enter the Contact Details" [class.is-invalid]="organizationForm.get('contact_details')?.touched && organizationForm.get('contact_details')?.invalid">
                    </div>
                </div> -->
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="contact_details" class="font-weight-bold">Contact Number*</label>
                    <input
                      id="contact_details"
                      formControlName="contact_details"
                      type="tel"
                      class="form-control"
                      placeholder="Enter your Contact Number" [class.is-invalid]="organizationForm.get('contact_details')?.touched && organizationForm.get('contact_details')?.invalid"
                    />
                    <div *ngIf="organizationForm.controls['contact_details'].invalid && organizationForm.controls['contact_details'].touched" class="text-danger">
                      <!-- <div *ngIf="profileForm.controls['contact_number'].hasError('required')">
                        Contact Number is required.
                      </div> -->
                      <div *ngIf="organizationForm.controls['contact_details'].hasError('maxLength')">
                        Contact Number cannot be more than 10 digits.
                      </div>
                      <div *ngIf="organizationForm.controls['contact_details'].hasError('pattern')">
                        Contact Number must be a 10-digit number.
                      </div>
                    </div>
                  </div>
                </div>



            </div>


            <!-- <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                      <label for="category">Main Category *</label>
                      <select id="category" formControlName="category" class="form-control"  [class.is-invalid]="organizationForm.get('category')?.touched && organizationForm.get('category')?.invalid"    required>
                        <option value="" disabled selected>Select a Main Category </option>

                        <option *ngFor="let category of mainCategory" [value]="category.value" >
                          {{ category.label }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group"  *ngIf="!isOthers">
                      <label for="sub_category">Category *</label>

                      <select id="sub_category" formControlName="sub_category" class="form-control" [class.is-invalid]="organizationForm.get('sub_category')?.touched && organizationForm.get('sub_category')?.invalid" required>

                        <option value="" disabled selected>Select a Category  </option>

                        <option *ngFor="let subcategory of subcategories" [value]="subcategory.value">
                          {{ subcategory.label }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="gender">Training Type *</label>
                    <select class="form-control" id="gender" formControlName="training_type" [class.is-invalid]="organizationForm.get('training_type')?.touched && organizationForm.get('training_type')?.invalid" required>
                        <option value="" disabled selected>Select your Mode</option>
                        <option value="ONLINE">ONLINE</option>
                        <option value="OFFLINE">OFFLINE</option>
                    </select>
                </div>
            </div> -->
            <div class="row" *ngIf="!isOthers">
                <div class="col-md-4">
                    <div class="form-group">
                      <label for="category">Main Category*</label>
                      <select id="category" formControlName="category" class="form-control" [class.is-invalid]="organizationForm.get('category')?.touched && organizationForm.get('category')?.invalid" required>
                        <option value="" disabled selected>Select a Main Category </option>
                        <option *ngFor="let category of mainCategory" [value]="category.value" >
                          {{ category.label }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group" >
                      <label for="sub_category">Category*</label>
                      <select id="sub_category" formControlName="sub_category" class="form-control"  >
                        <option value="" disabled selected>Select a  Category </option>
                        <option *ngFor="let subcategory of subcategories" [value]="subcategory.value">
                          {{ subcategory.label }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="gender">Training Type *</label>
                    <select class="form-control" id="gender" formControlName="training_type" [class.is-invalid]="organizationForm.get('training_type')?.touched && organizationForm.get('training_type')?.invalid" required>
                        <option value="" disabled selected>Select your Mode</option>
                        <option value="ONLINE">ONLINE</option>
                        <option value="OFFLINE">OFFLINE</option>
                    </select>
                </div>
            </div>
              <div class="row" *ngIf="isOthers">
                  <div class="col-md-6">
                      <div class="form-group">
                        <label for="category">Main Category*</label>
                        <select id="category" formControlName="category" class="form-control" [class.is-invalid]="organizationForm.get('category')?.touched && organizationForm.get('category')?.invalid" required>
                          <option value="" disabled selected>Select a Main Category </option>
                          <option *ngFor="let category of mainCategory" [value]="category.value" >
                            {{ category.label }}
                          </option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group col-md-6">
                      <label for="gender">Training Type *</label>
                      <select class="form-control" id="gender" formControlName="training_type" [class.is-invalid]="organizationForm.get('training_type')?.touched && organizationForm.get('training_type')?.invalid" required>
                          <option value="" disabled selected>Select your Mode</option>
                          <option value="ONLINE">ONLINE</option>
                          <option value="OFFLINE">OFFLINE</option>
                      </select>
                  </div>
              </div>
         
         
         
         
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                      <label for="start_date">Start Date *</label>
                      <input
                        type="datetime-local"
                        class="form-control"
                        id="start_date"
                        formControlName="start_date"
                        [min]="getsFormattedMinDate()"
                        [class.is-invalid]="organizationForm.get('start_date')?.touched && organizationForm.get('start_date')?.invalid"
                        (change)="onStartDateChange()"
                      />
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="end_date">End Date *</label>
                      <input
                        type="datetime-local"
                        class="form-control"
                        id="end_date"
                        formControlName="end_date"
                        [min]="formattedEndDateMin"
                        [class.is-invalid]="organizationForm.get('end_date')?.touched && organizationForm.get('end_date')?.invalid"
                      />
                    </div>
                  </div>
                  
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="training_link">Training Link *</label>
                        <input type="url" class="form-control" id="training_link" formControlName="training_link" placeholder="http://example.com"
                        [class.is-invalid]="organizationForm.get('training_link')?.touched && organizationForm.get('training_link')?.invalid">
                    </div>
                    <p style="font-size: 13px;">Provide the correct URL (e.g., http://example.com)</p>

                </div>
                <!-- <div class="col-md-4">
                  <div class="form-group">
                    <label for="training_link">Training Link *</label>
                    <input type="url" class="form-control" id="training_link" formControlName="training_link" placeholder="https://example.com"
                    [class.is-invalid]="organizationForm.get('training_link')?.touched && organizationForm.get('training_link')?.invalid">
                  </div>
                  <p style="font-size: 13px;">Provide the correct URL (e.g., https://example.com)</p>
                
                  <div *ngIf="organizationForm?.touched && organizationForm?.invalid" class="invalid-feedback">
                    <div *ngIf="organizationForm?.hasError('required')">
                      This field is required.
                    </div>
                    <div *ngIf="organizationForm?.hasError('invalidUrl')">
                      Please provide a valid URL starting with 'https://'.
                    </div>
                  </div>
                </div> -->
                
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="location">Location *</label>
                        <textarea class="form-control" id="location" formControlName="location" placeholder="Enter the Location" [class.is-invalid]="organizationForm.get('location')?.touched && organizationForm.get('location')?.invalid"></textarea>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="desc">Description *</label>
                        <textarea class="form-control" id="desc" formControlName="desc" placeholder="Enter the Description" [class.is-invalid]="organizationForm.get('desc')?.touched && organizationForm.get('desc')?.invalid"></textarea>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="continent">Continent *</label>
                        <select class="form-control" id="continent" formControlName="continent"[class.is-invalid]="organizationForm.get('continent')?.touched && organizationForm.get('continent')?.invalid">
                            <option *ngFor="let option of ContinentOptions" [value]="option.value">{{ option.label }}</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="form-group">
                        <label for="country">Country *</label>
                        <select class="form-control" id="country" formControlName="country" [class.is-invalid]="organizationForm.get('country')?.touched && organizationForm.get('country')?.invalid">
                            <option *ngFor="let option of CountryOptions" [value]="option.value">{{ option.label }}</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="form-group">
                        <label for="state">State *</label>
                        <select class="form-control" id="state" formControlName="state" [class.is-invalid]="organizationForm.get('state')?.touched && organizationForm.get('state')?.invalid">
                            <option *ngFor="let option of StateOptions" [value]="option.value">{{ option.label }}</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="object_id">District *</label>
                        <select class="form-control" id="object_id" formControlName="object_id" [class.is-invalid]="organizationForm.get('object_id')?.touched && organizationForm.get('object_id')?.invalid">
                            <option *ngFor="let option of DistrictOptions" [value]="option.value">{{ option.label }}</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                  <label>Upload image *</label>
                  <nz-upload
                    nzListType="picture-card"
                    [(nzFileList)]="bannerFileList"
                    [nzShowButton]="bannerFileList.length < 1"
                    (nzChange)="handleBannerFileChange($event)"
                    [nzAccept]="'image/*'"
                    (nzRemove)="handleBannerFileRemove()">
                    <div>
                      <i nz-icon nzType="plus"></i>
                      Upload Image
                    </div>
                  </nz-upload>
                  <div *ngIf="organizationForm.get('image')?.touched && organizationForm.get('image')?.invalid" class="text-danger">
                    Image is required.
                  </div>

                </div>

                   
                          <!-- <div class="col-md-4">
                            <label>Upload video *</label>

                            <div class="form-group video-container">
                              <nz-upload
                                nzListType="text"
                                [(nzFileList)]="videoFileList"
                                [nzShowButton]="videoFileList.length < 1"
                                (nzChange)="handleVideoFileChange($event)"
                                [nzAccept]="'video/*'"
                                (nzRemove)="handleVideoFileRemove()">
                                <div>
                                  <i nz-icon nzType="plus"></i>
                                  Upload Video
                                </div>
                              </nz-upload>
                            </div>
                            <div *ngIf="organizationForm.get('video')?.touched && organizationForm.get('video')?.invalid" class="text-danger">
                                Video is required.
                              </div>
                          </div> -->
                      
                          <div class="col-md-4">
                            <label>Upload video *</label>
                            <div class="form-group">
                            <nz-upload
                              class="video-container"
                              nzListType="text"
                              [(nzFileList)]="videoFileList"
                              [nzShowButton]="videoFileList.length < 1"
                              (nzChange)="handleVideoFileChange($event)"
                              [nzAccept]="'video/*'"
                              (nzRemove)="handleVideoFileRemove()"
                            >
                              <div style="width: 100%; height: 100px; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1px dashed #d9d9d9; padding: 10px;">
                                <i nz-icon nzType="plus"></i> Upload Video
                              </div>
                            </nz-upload>
                            </div>
                            <div
                              *ngIf="organizationForm.get('video')?.touched && organizationForm.get('video')?.invalid"
                              class="text-danger"
                            >
                              Video is required.
                            </div>
                          </div>
                          
                      
            </div>


              

            <div class="row">
                <div class="text-center">
                    <button type="submit" class="btn" style="background-color: orange;" [disabled]="formDisabled">Submit</button>
                </div>
            </div>

 
        </form>
    </div>
    </ng-template>


    <ng-template [ngIf]="displayName === 'submission'">
        <div class="container mt-5 mb-5">
            <div class="row justify-content-center" style="margin-top: 100px;">
                <div class="col-12 col-md-9" *ngIf="organization">
                    <h4 class="mb-5 text-center">{{ organization.name }}</h4>
                    <div class="row">
                        <div class="col-12 col-md-6 d-flex justify-content-center align-items-start">
                            <div class="image-container mb-5">
                                <img [src]="organization.image ? 'data:image/jpeg;base64,' +   organization.image : '../../assets/images/noImageDataImage.jpg'" 
                                     alt="Organization Image"
                                     class="img-fluid rounded"
                                     style="height: 300px; width: 100%; object-fit: fill;">
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="details">
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Training Name:</b></span> {{ organization.name }}
                                </div>
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Trainer Name:</b></span> {{ organization.trainer_name }}
                                </div>
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Contact Details:</b></span> {{ organization.contact_details }}
                                </div>
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Training Link:</b></span>
                                    <a href="{{ organization.training_link }}" target="_blank">{{ organization.training_link }}</a>
                                </div>
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Start Date:</b></span> {{ organization.start_date }}
                                </div>
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>End Date:</b></span> {{ organization.end_date }}
                                </div>
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Training Type:</b></span> {{ organization.training_type }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="details">
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Location:</b></span> {{ organization.location }}
                                </div>
                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Description:</b></span> {{ organization.desc }}
                                </div>
                                <!-- <div class="detail mb-3">
                                    <span class="detail-label"><b>Video:</b></span>
                                    <video *ngIf="organization.video" [src]="getVideoUrl()" controls width="100%">
                                      Your browser does not support the video tag.
                                    </video>
                                </div> -->

                                <div class="detail mb-3">
                                    <span class="detail-label"><b>Video:</b></span>
                                    <video *ngIf="organization.video" [src]="getVideoUrl()" controls width="100%">
                                      Your browser does not support the video tag.
                                    </video>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        
                <div class="col-12 col-md-2 d-md-block">
                    <div class="image-container mt-5 mt-md-0" style="position: relative;">
                        <img src="../../assets/images/saynotoplastic.webp" 
                             class="img-fluid" 
                             style="height: 600px; width: 100%; object-fit: fill;" 
                             alt="Ad Space" id="banner-image">
                    </div>
                </div>
                
                <div *ngIf="!organization" class="col-12">
                    <p class="text-center">No organization details available.</p>
                </div>
            </div>
        </div>
      </ng-template>
</div>
