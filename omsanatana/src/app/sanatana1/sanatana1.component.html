<div class="container mt-5">
    <ngx-spinner bdOpacity=0.9 bdColor="rgba(51, 51, 51, 0.8)" size="medium" color="#fff"
    type="ball-spin-clockwise">
  </ngx-spinner>
    <div class="row">
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3 custom-padding" [ngClass]="{'side-menu-open': isSideMenuOpen}" style="margin-top: 100px;">
        <div>
          <button class="btn btn-primary d-md-none mb-2" (click)="toggleSideMenu()" aria-label="Toggle menu">&#9776;</button>
          <div class="card shadow-sm side-menu" [ngClass]="{'d-none d-md-block': !isSideMenuOpen}">
            <div class="card-header text-white d-flex justify-content-between align-items-center" style="background: linear-gradient(to right, #ff5500, #FF8c00); color: white;">
              <h6 class="mb-0">Categories Filters</h6>
              <button class="btn-close btn-close-white d-md-none" (click)="toggleSideMenu()" aria-label="Close menu"></button>
            </div>
            <div class="card-body" style="height: 80vh; overflow-y: auto;">
              <div *ngIf="category" >
                
                <h6 
                (click)="fetchAllCategoryData(category._id)" 
                [ngClass]="{'highlighted-category': selectedCategoryId === category._id}" 
                style="cursor: pointer;">
                {{ category.name }}
              </h6>
                <div *ngIf="subcategories && subcategories.length > 0">
                  <ul>
                    <div *ngFor="let subcategory of subcategories" (click)="onclick(subcategory._id)">
                        <!-- <p style="cursor: pointer;"><span class="bullet">&#10146;</span> {{ subcategory.name }}
                        </p> -->
                        <p 
                        [ngClass]="{'highlighted-subcategory': selectedCategoryId === subcategory._id}" 
                        style="cursor: pointer;">
                        <span class="bullet">&#10146;</span> {{ subcategory.name }}
                      </p>
                    </div>
                  </ul>
                </div>


              </div>
            </div>
          </div>
        </div>
      </div>  
  
      <div class="col-md-8 col-lg-8 col-xl-9" style="margin-top: 100px; height: 85vh; overflow-y: auto;">
        <div *ngIf="categoryData" class="category-details">
          <!-- <h2 style="text-align: center; color: #ff5500;">{{ categoryData.name }}</h2> -->


          <div class="d-flex justify-content-between align-items-center">
            <h2 class="flex-grow-1 text-center" style="color: #ff5500; ">
              {{ categoryData.name }}
            </h2>
            <button class="btn btn-light" (click)="sharegetbysanatana(categoryData)" style="font-size: 20px;">
              <i class="fas fa-share-alt"></i>
            </button>
          </div>
          <p>{{ categoryData.desc }}</p>
          <div *ngFor="let item of categoryData.file_path.data">
            <div *ngIf="item.type === 'text'">
              <!-- <p>{{ item.text }}</p> -->
              <!-- <p style="text-align: justify; font-size: 18px;" [innerHTML]="highlightText(item.text)" (click)="handleKeywordClick($event)"> -->
                <p style="text-align: justify; font-size: 18px;cursor: pointer;" [innerHTML]="highlightText(item.text)" (click)="handleTextClick($event)"   (copy)="preventCopy($event)"></p>

            </div>
            <div *ngIf="item.type === 'image'" class="d-flex justify-content-center align-items-center">
              <img [src]="item.image ? 'data:image/jpeg;base64,' + item.image : ''" alt="{{ categoryData.name }}" class="img-fluid" style="margin-bottom: 10px;" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>